# 数据库结构和业务逻辑说明

## 重要字段说明

### 1. 库存状态字段 (StockStatus)
- **字段说明**: `instock/outofstock/onbackorder` 是从网站导出的历史快照数据
- **业务用途**: 仅记录当时网站上的库存状态展示情况
- **新系统处理**: 新代码中暂时不使用此字段，保留作为历史数据参考
- **实际库存**: 以 `Stock` 字段的数值为准

### 2. 产品分类字段

#### 旧分类系统（历史数据）
- `Category`: 大类别英文名称（早期建网站时使用）
- `SubCat`: 子类别英文名称（与nSubCategory内容一致）

#### 新分类系统（当前使用）
- `nCategory`: 新设定的大类别英文名称（**主要使用**）
- `nSubCategory`: 新设定的子类别英文名称（**主要使用**）
- `CatCode`: 子类别代码，三位数字（保持不变）

### 3. 分类映射关系
- `SubCat` 与 `nSubCategory` 内容一致
- `CatCode` 保持现有值不变
- **新增产品规则**: 需要提供 `CatCode` 与 `nCategory`、`nSubCategory` 的对应关系

### 4. 数据库设计考虑
基于以上说明，新系统的数据库查询应该：

1. **使用新分类系统**: 优先使用 `nCategory` 和 `nSubCategory`
2. **实际库存**: 以 `Stock` 字段为准，忽略 `StockStatus` 的业务逻辑
3. **历史数据保留**: `StockStatus` 和 `Category` 作为历史数据保留，但不在核心业务中使用

### 5. 新增产品流程
当需要新增产品时，需要提供：
- `CatCode` (三位数字代码)
- `nCategory` (新大类别名称)
- `nSubCategory` (新子类别名称)
- 确保新产品的分类编码与现有体系保持一致